# CS213 Database Project1

- Student Name: ç‹å­æ’

- Student ID: 12310401

## å¼•è¨€

### èƒŒæ™¯æŸ¥è¯¢

é€šè¿‡æŸ¥é˜…æ•™æï¼š

>**æ–‡ä»¶å¤„ç†ç³»ç»Ÿ(file-processing system)** æ˜¯ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„ã€‚æ°¸ä¹…è®°å½•è¢«å­˜å‚¨åœ¨å¤šä¸ªä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œäººä»¬ç¼–å†™ä¸åŒçš„åº”ç”¨ç¨‹åºæ¥å°†è®°å½•ä»æœ‰å…³æ–‡ä»¶ä¸­å–å‡ºæˆ–åŠ å…¥åˆ°é€‚å½“çš„æ–‡ä»¶ä¸­ã€‚åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰å‡ºç°ä»¥å‰ï¼Œå„ä¸ªç»„ç»‡é€šå¸¸éƒ½é‡‡ç”¨è¿™æ ·çš„ç³»ç»Ÿæ¥å­˜å‚¨ä¿¡æ¯ã€‚
>
>åœ¨æ–‡ä»¶å¤„ç†ç³»ç»Ÿä¸­å­˜å‚¨ç»„ç»‡ä¿¡æ¯çš„ä¸»è¦å¼Šç«¯åŒ…æ‹¬ï¼š
>
>æ•°æ®çš„å†—ä½™å’Œä¸ä¸€è‡´ï¼›æ•°æ®è®¿é—®å›°éš¾ï¼›æ•°æ®å­¤ç«‹ï¼›å®Œæ•´æ€§é—®é¢˜ï¼›åŸå­æ€§é—®é¢˜ï¼›å¹¶å‘è®¿é—®å¼‚å¸¸ï¼›å®‰å…¨æ€§é—®é¢˜ï¼›
>
>--å¼•è‡ªã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µï¼ˆåŸä¹¦ç¬¬å…­ç‰ˆï¼‰ã€‹[^1]

### projectç›®çš„

æ¯”è¾ƒæ–‡ä»¶ç³»ç»Ÿå’ŒPostgreSQLåœ¨æ•°æ®æ£€ç´¢ã€æ›´æ–°ç­‰æ“ä½œä¸Šçš„æ€§èƒ½å·®å¼‚ã€‚

### ç ”ç©¶é—®é¢˜

1. ä¸åŒå­˜å‚¨æœºåˆ¶å¯¹æ€§èƒ½çš„å½±å“
2. æ•°æ®åº“ä½¿ç”¨çš„æ•°æ®ç»“æ„çš„ä½œç”¨

### Reportç»“æ„

æŠ¥å‘Šå¯¹äºä¸¤ä¸ªä¸åŒçš„æ•°æ®æºåˆ†åˆ«æ¢è®¨è¾ƒå°æ•°æ®é›†å•ä¸ªè¡¨å’Œè¾ƒå¤§æ•°æ®é›†å…³ç³»å‹æ•°æ®åº“çš„æ€§èƒ½å·®å¼‚ï¼Œåˆ†åˆ«è¿›è¡Œäº†I/Oå’ŒJDBCçš„å¯¹æ¯”ã€‚

å°†ä»æ•°æ®åº“è®¾è®¡ï¼Œæ•°æ®å¯¼å…¥ï¼ŒIOä¸DBMSåŠŸèƒ½ï¼Œç¨‹åºå®ç°ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œç»“æœåˆ†æä¸æœºåˆ¶å¯¹æ¯”ï¼Œå…­ä¸ªæ–¹é¢å±•å¼€ã€‚

## æ•°æ®æº

é¦–å…ˆåœ¨å’Œé²¸ç¤¾åŒºä¸Šæ‰¾åˆ°ä¸€ä¸ªè¾ƒå°çš„ï¼ˆ12Mï¼‰æ•°æ®é›†[ã€Bç«™æ¯å‘¨å¿…çœ‹ã€‘æˆªè‡³æœ€æ–°237æœŸæ•°æ®](https://www.heywhale.com/mw/dataset/6523c441b0f4556a312692c1)[^2]ã€‚åæ¥å‘ç°æ•°æ®é‡åå°ï¼Œå¯¹äºæ€§èƒ½æµ‹è¯•å·®è·ä¸æ˜æ˜¾ï¼Œåˆä½¿ç”¨äº†ä¸€ä¸ªè¾ƒå¤§çš„æ•°æ®é›†[bç«™userå’Œuseråˆ¶ä½œçš„çŸ­è§†é¢‘æ•°æ®](https://www.heywhale.com/mw/dataset/6347b53efcd8fca1f7dfba16/content)[^3],è€Œä¸”å› ä¸ºå«å…³æ³¨å…³ç³»ï¼Œå¯ä»¥æ¢ç©¶å…³ç³»å‹æ•°æ®åº“çš„ç›¸å…³æ€§èƒ½ã€‚


## Bç«™æ¯å‘¨å¿…çœ‹æ•°æ®é›†ï¼ˆè¾ƒå°æ•°æ®å•è¡¨çš„I/Oä¸JDBCå¯¹æ¯”ï¼‰

### æ•°æ®åº“è®¾è®¡

ç”±äºè¿™æ¬¡åªæ¢ç©¶æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½å·®å¼‚ï¼Œæ‰€ä»¥æ•°æ®åº“è®¾è®¡è¾ƒä¸ºç®€å•ï¼Œåªæœ‰ä¸€ä¸ªè¡¨`videos`ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µ(å¯¹åº”csvçš„heads)ï¼š

- term æœŸæ•°
- duration æœŸæ•°æè¿°
- title æ ‡é¢˜
- part è§†é¢‘ç±»å‹
- description è§†é¢‘æ ‡ç­¾
- url è§†é¢‘é“¾æ¥
- last_time è§†é¢‘æ—¶é•¿
- author upä¸»
- mid upä¸»_id
- aid aidï¼ˆè§†é¢‘idï¼‰
- coins æŠ•å¸æ•°
- danmus å¼¹å¹•æ•°
- favorites æ”¶è—æ•°
- likes ç‚¹èµæ•°
- comments è¯„è®ºæ•°
- shares åˆ†äº«æ•°
- plays æ’­æ”¾æ•°
- date å‘å¸ƒæ—¶é—´

ä¸»é”®é€‰æ‹©ï¼Œç”±äºå¯èƒ½å‡ºç°åŒä¸€ä¸ªè§†é¢‘åœ¨ä¸åŒæœŸæ•°è¢«æ¨èï¼Œæ‰€ä»¥é€‰æ‹©`term`å’Œ`aid`ä½œä¸ºè”åˆä¸»é”®ã€‚

### æ•°æ®å¯¼å…¥

å®ç°å¹¶æ¢ç©¶å››ç§æ–¹å¼çš„æ•°æ®å¯¼å…¥ï¼š

1. PostgreSQLæ•°æ®åº“ï¼š
   1. ä½¿ç”¨sql `INSERT`è¯­å¥é€æ¡æ’å…¥ã€‚
   2. ä½¿ç”¨sql `COPY`è¯­å¥æ‰¹é‡æ’å…¥ã€‚
   3. ä½¿ç”¨JAVA JDBCæ‰¹é‡æ’å…¥ã€‚
2. IOæ–‡ä»¶ç³»ç»Ÿï¼š
   1. ä½¿ç”¨JAVAè¯»å–æ–‡ä»¶é€æ¡æ’å…¥ã€‚

### IOä¸DBMSåŠŸèƒ½

ä»…ä¸ºäº†æµ‹è¯•DBMSçš„æ€§èƒ½ï¼Œå®ç°äº†å‡ ä¸ªåŸºç¡€åŠŸèƒ½ï¼š

1. å»ºè¡¨`public void createtable()`(JDBC)
2. å¯¼å…¥æ•°æ®`public void videos_reader()`
3. æ’å…¥æ•°æ®`public boolean ref_video`
4. åˆ é™¤æ•°æ®`public boolean delete_video`
5. æŸ¥è¯¢æ•°æ®
   1. `public boolean select_author` æ ¹æ®ä½œè€…æŸ¥è¯¢
   2. `public boolean select_aid` æ ¹æ®è§†é¢‘aidæŸ¥è¯¢
6. æ›´æ–°æ•°æ®`public boolean update_video`

### ç¨‹åºå®ç°

#### è¿è¡Œç¯å¢ƒ

>æœ¬æ¥æ˜¯åœ¨windowsä¸‹ä½¿ç”¨DataGripè¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯ç”±äºå…¶çš„é«˜å†…å­˜å ç”¨ï¼ˆä¹Ÿå¯èƒ½æ˜¯ä¸€å¹´æ²¡ç”¨DataGripäº†ï¼Œç”µè„‘è«åè·‘ä¸åŠ¨ï¼Œä½†æ˜¯ä¸æƒ³é‡è£…äº†ï¼‰å°è¯•äº†å‡ æ¬¡éƒ½æ˜¯ï¼Œå¯¼å…¥ä»…ä»…8000è¡Œï¼Œ18å­—æ®µçš„æ•°æ®å°±ä½¿ç”¨äº†1.5hå·¦å³çš„æ—¶é—´ï¼Œè€Œåœ¨Cmdä¸‹ä½¿ç”¨`psql -i`è¿è¡ŒåŒæ ·çš„sqlæ–‡ä»¶åªéœ€è¦å‡ ç§’ï¼Œä¸ºäº†ä¿è¯æ€§èƒ½æµ‹è¯•ä¸è¢«DataGripå½±å“ï¼Œæœ€åæ›´æ¢åˆ°Mac OSä¸‹ç›´æ¥ä½¿ç”¨zshå’Œvscodeè¿›è¡Œå¼€å‘ã€‚

- System:MacOS 15.0 (24A335)
- Chip: Apple M1
- Total Number of Cores: 8 (4 performance and 4 efficiency)
- Memory: 8 GB

#### æ•°æ®é¢„å¤„ç†

ä½¿ç”¨Javaçš„[commons-csv](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/package-summary.html)[^4]åº“è¯»å–csvæ–‡ä»¶ï¼Œå°†æ•°æ®ä»¥`INSERT`è¯­å¥çš„å½¢å¼å†™å…¥`sqlscript.sql`æ–‡ä»¶ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨commons-csvåº“è¯»å–csvæ–‡ä»¶æ—¶ï¼Œå°±ä¸ç”¨å†å¯¹å­—æ®µä¸­å­˜åœ¨çš„ç‰¹æ®Šç¬¦å·å†è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚`'`ï¼Œ`"`ç­‰ï¼Œå¦åˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†ä¼šååˆ†éº»çƒ¦ã€‚

#### psqlä¸‹å»ºè¡¨åŠå¯¼å…¥æ•°æ®

1. é€æ¡æ’å…¥
    `sqlscript.sql`æ–‡ä»¶ä¸­çš„æ•°æ®ä»¥`INSERT`è¯­å¥çš„å½¢å¼æ’å…¥ã€‚

    ```sql
    BEGIN TRANSACTION;
    INSERT INTO videos (term, duration, title, part, url, last_time, author, mid, aid, coins, danmus, favorites, likes, comments, shares, plays, date) VALUES (1, '2019ç¬¬1æœŸ 03.22 - 03.28', 'the real suger babyå·²çŸ¥æœ€é«˜ç”»è´¨', 'éŸ³ä¹ç»¼åˆ', 'https://b23.tv/BV16b411b71j', 29, 'ä¸€å—·åš', 30194033, 45031807, 240890, 21841, 703355, 772538, 19575, 103901, 29236360, '2019-03-01 18:48:18.0');
    ...--8103è¡Œ
    COMMIT;
    ```

    åœ¨zshä¸‹ï¼š

    ```bash
    psql -d project1
    project1=#
        VACUUM; #æ¸…ç†æ­¤å‰æµ‹è¯•æ—¶æ•°æ®åº“çš„æ•°æ®
        \timing; #å¼€å¯è®¡æ—¶
        create table videos(
            term int  not null,
            duration varchar not null ,
            title varchar(100) not null ,
            part varchar(100) not null ,
            description varchar(10000) ,
            url varchar(100) not null ,
            last_time numeric not null,
            author varchar(100) not null,
            mid numeric not null,
            aid numeric not null ,
            coins numeric not null ,
            danmus numeric not null ,
            favorites numeric not null,
            likes numeric not null ,
            comments numeric not null ,
            shares numeric not null ,
            plays numeric not null ,
            date timestamp(0) not null,
            primary key (term,aid)
        );
        \i sqlscript.sql; #å¯¼å…¥æ•°æ®
    ```

2. æ‰¹é‡æ’å…¥
    postgresqlæ”¯æŒä½¿ç”¨`COPY`ç›´æ¥ä»csvæ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚

    ```sql
    COPY videos FROM './Bç«™æ¯å‘¨å¿…çœ‹æ•°æ®.csv' DELIMITER ',' CSV HEADER;
    ```

#### DBMSä»¥åŠIOæ•°æ®å¯¼å…¥

Javaé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```none
- Client                    # å®¢æˆ·ç«¯mainå‡½æ•°
    - Video                 # æ•°æ®ç±»
    - DataScipt             # æ•°æ®åº“å»ºç«‹åŠæ•°æ®å¯¼å…¥
        - DataBaseScript    # PostgreSQLæ•°æ®åº“å­˜å‚¨
        - IOFileSCript      # JSONæ–‡ä»¶å­˜å‚¨
    - DataManner            # æ“ä½œå®ç°æ¥å£
        - DBManner          # DBMSæ“ä½œå®ç°
        - FileManner        # æ–‡ä»¶æ“ä½œå®ç°
```

ä»£ç è¯´æ˜ï¼š

1. `Video`ç±»ï¼šæ•°æ®ç±»ï¼ŒåŒ…å«äº†è§†é¢‘çš„æ‰€æœ‰å­—æ®µã€‚
2. `DataScipt`ï¼š
   1. ç±»`DataBaseScript`
        - ä½¿ç”¨postgresql.42.2.5çš„`Connection`è¿æ¥æ•°æ®åº“ï¼Œå¹¶åœ¨å…¶ä¸­å®ç°äº†å»ºè¡¨å’Œæ•°æ®å¯¼å…¥ã€‚ä½¿ç”¨[commons-csv](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/package-summary.html)[^4]åº“è¯»å–csvæ–‡ä»¶ï¼Œæ•°æ®å¯¼å…¥ä½¿ç”¨**å…³é—­è‡ªåŠ¨æäº¤**çš„`PreparedStatement`ï¼Œå¹¶ä½¿ç”¨æ‰¹å¤„ç†åœ¨æ’å…¥**1000**æ¡æ•°æ®åæäº¤ä¸€æ¬¡ã€‚
   2. ç±»`IOFileScript`
        - ä½¿ç”¨BufferReaderè¯»å–csvæ–‡ä»¶å¹¶ä½¿ç”¨Googleçš„[Gson](https://github.com/google/gson)[^5]åº“å°†æ•°æ®å†™å…¥jsonæ–‡ä»¶ã€‚
3. `DataManner`ï¼š
   1. æ¥å£`DataManner`ï¼šå®šä¹‰äº†æ•°æ®åº“æ“ä½œçš„æ¥å£ã€‚
   2. ç±»`DBManner`ï¼šå®ç°äº†`DataManner`æ¥å£ï¼Œä½¿ç”¨`Connection`è¿æ¥æ•°æ®åº“ï¼Œå®ç°äº†å»ºè¡¨ï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢ï¼Œæ›´æ–°ç­‰æ“ä½œã€‚
   3. ç±»`FileManner`ï¼šå®ç°äº†`DataManner`æ¥å£ï¼Œä½¿ç”¨`BufferedReader`è¯»å–csvæ–‡ä»¶ï¼Œå®ç°äº†æ’å…¥ï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢ï¼Œæ›´æ–°ç­‰æ“ä½œã€‚

è¯¦ç»†ä»£ç è§é™„ä»¶æˆ–[github]()ã€‚

### æ€§èƒ½æµ‹è¯•

åœ¨Client.javaä¸­åˆ†åˆ«æŒ‡å®š`String manipulator="DataBaseScript";`, `String manipulator="IOFileScript";`ï¼Œå¾—åˆ°JDBCå’ŒI/Oè¿è¡Œç»“æœï¼Œä»¥è¿è¡Œæ—¶é—´ä½œä¸ºè¡¡é‡æ ‡å‡†ã€‚

#### JDBC

![alt text](Project1_report/image-2.png)

#### I/O

![alt text](Project1_report/image.png)

## Bç«™userå’Œuseråˆ¶ä½œçš„çŸ­è§†é¢‘æ•°æ®ï¼ˆè¾ƒå¤§æ•°æ®å…³ç³»å‹æ•°æ®åº“ä¸æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”ï¼‰

å…¶å®ä¸¤ä¸ªcsvæ–‡ä»¶å¯ä»¥ç”±è§†é¢‘å’Œupä¸»å»ºç«‹æ›´å¤æ‚çš„å…³ç³»å‹æ•°æ®åº“ï¼Œä½†æ˜¯è¿™é‡Œåªä¸ºäº†å¯¹æ¯”æ€§èƒ½ï¼Œæ‰€ä»¥åªç”¨user.csvå»ºç«‹äº†ä¸¤ä¸ªè¡¨userå’Œfollowsï¼Œå¹¶ç”¨upä¸»çš„midä½œä¸ºå¤–é”®è¿›è¡Œè”ç³»ã€‚

ç”±äºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°*bç«™userå’Œuseråˆ¶ä½œçš„çŸ­è§†é¢‘æ•°æ®*æ•°æ®é›†ä¸­çš„æ•°æ®ç»“æ„å‰åä¸ä¸€è‡´ï¼Œä¸”å…³ç³»æ— æ³•è‡ªæ´½ï¼Œæƒ³è¦å»ºç«‹å¤–é”®çº¦æŸæ—¶å‘ç°æ•°æ®ä¸ä¸€è‡´ï¼Œæ‰€ä»¥æ¨¡ä»¿è¯¥æ•°æ®é›†ç»“æ„ï¼Œä½¿ç”¨pythonè„šæœ¬ä½¿ç”¨éšæœºå‡½æ•°é€ äº†ä¸€ä¸ª2000000è¡Œï¼Œ1.7Gçš„æ•°æ®é›†ã€‚

### æ•°æ®é›†ç”Ÿæˆ

- midä½¿ç”¨1000000-3000000çš„æ‰€æœ‰ä¸é‡å¤æ•´æ•°ï¼Œå¹¶ä¸”æ‰“ä¹±é¡ºåºã€‚
- following_listä½¿ç”¨éšæœºå‡½æ•°ç”Ÿæˆï¼Œæ¯ä¸ªç”¨æˆ·å…³æ³¨çš„äººæ•°åœ¨1-200ä¹‹é—´ï¼Œå…³æ³¨çš„äººçš„midåœ¨1000000-3000000ä¹‹é—´ã€‚ç¡®ä¿å¤–é”®çº¦æŸã€‚

è¯¦ç»†ä»£ç è§é™„ä»¶æˆ–githubã€‚

### æ•°æ®åº“è®¾è®¡

æ•°æ®åˆ†æï¼šuser.csvå†…çš„å­—æ®µæœ‰"mid",,"level","name","official_role","official_title","rank","sign","following_list"ã€‚

userè¡¨è®¾è®¡ï¼š

```sql
    mid numeric primary key,
    is_followed int not null,
    level int not null,
    name varchar(100),
    official_role int not null,
    official_title varchar(100),
    rank int not null,
    sign varchar(100),
    following int not null,
    follower int not null
```

followsè¡¨è®¾è®¡ï¼š

```sql
    following numeric,
    follower numeric,
    primary key (follower,following),
    foreign key (follower) references user(mid),
    foreign key (following) references user(mid)
```

### IOä¸DBMSåŠŸèƒ½

ä»…ä¸ºäº†æµ‹è¯•DBMSçš„æ€§èƒ½ï¼Œå®ç°äº†å‡ ä¸ªåŸºç¡€åŠŸèƒ½ï¼š

1. å»ºè¡¨`public void createtable()`(JDBC)
2. å¯¼å…¥æ•°æ®`public void users_reader()`
3. æ’å…¥æ•°æ®
   1. `public boolean sign_user`
   2. `public boolean follow_user`
4. åˆ é™¤æ•°æ®
   1. `public boolean logout_user`
   2. `public boolean unfollow_user`
5. æŸ¥è¯¢æ•°æ®
   1. `public boolean select_mid` æ ¹æ®ä½œè€…æŸ¥è¯¢
   2. `public boolean select_follower` æŸ¥è¯¢å…³æ³¨å½“å‰ç”¨æˆ·çš„ç”¨æˆ·
   3. `public boolean select_following` æŸ¥è¯¢å½“å‰ç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·
6. æ›´æ–°æ•°æ®`public boolean update_user`

å…¶ä»–æ“ä½œåŒä¸Š

JDBCè¿è¡Œç»“æœå›¾
![alt text](Project1_report/image-4.png)
![alt text](Project1_report/image-5.png)
![alt text](Project1_report/image-6.png)
![alt text](Project1_report/image-7.png)
![alt text](Project1_report/image-8.png)
![alt text](Project1_report/image-9.png)

I/Oè¿è¡Œç»“æœå›¾
![alt text](Project1_report/image-10.png)
![alt text](Project1_report/image-11.png)

## ç»“æœåˆ†æ

### å•è¡¨I/Oä¸JDBCå¯¹æ¯”ï¼Œå°å‹æ•°æ®

|æ“ä½œ|JDBC(ms)|I/O(ms)|
|-|-|-|
|å­˜å‚¨æ•°æ®|324|276|
|æŸ¥è¯¢(éä¸»é”®)|11|78|
|æŸ¥è¯¢(ä¸»é”®)|5|40|
|æ’å…¥|2|205|
|æ›´æ–°|4|106|
|åˆ é™¤|0|106|
|å ç”¨ç©ºé—´|10 MB|5.2 MB|

### å…³ç³»å‹æ•°æ®åº“ä¸æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”ï¼Œå¤§å‹æ•°æ®ï¼Œä¸¤è¡¨

|æ“ä½œ|JDBC(ms)|I/O(ms)|
|-|-|-|
|å­˜å‚¨æ•°æ®|33108+2562193=2595301|14971|
|æŸ¥è¯¢mid|28|33389|
|æŸ¥è¯¢following|10851|13432|
|æŸ¥è¯¢follower|10986|19883|
|æ’å…¥user|17|87353|
|æ’å…¥follows|1|42764|
|åˆ é™¤å…³æ³¨|7681|36671|
|æ›´æ–°|12|34991|
|åˆ é™¤ç”¨æˆ·|15772|38959|
|å ç”¨ç©ºé—´|4502 MB|1.24 GB|

## ç»“æœåˆ†æä¸æœºåˆ¶å¯¹æ¯”

1. å­˜å‚¨æ—¶é—´ï¼šå½“æ•°æ®é‡è¾ƒå°æ—¶ï¼ŒI/Oçš„å­˜å‚¨æ—¶é—´è¾ƒçŸ­ï¼Œä½†æ˜¯å·®è·ä¸æ˜æ˜¾ï¼Œå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼ŒDBMSçš„å­˜å‚¨æ—¶é—´è¿œè¿œå¤§äºI/Oã€‚è¿™æ˜¯å› ä¸ºåœ¨DBMSæ’å…¥æ•°æ®æ—¶ï¼Œé™¤äº†è¿›è¡Œæ•°æ®çš„è½¬åŒ–ä¸å­˜å‚¨ï¼Œè¿˜è¦è¿›è¡Œçš„æ“ä½œæœ‰
   1. æ—¥å¿—è®°å½•
   2. äº‹åŠ¡ç®¡ç†ï¼Œåœ¨äº‹åŠ¡æäº¤å‰ï¼Œæ•°æ®ä¼šè¢«å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™å…¥ç£ç›˜ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç£ç›˜I/Oæ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚è™½ç„¶æˆ‘çš„ä»£ç ä¸­å·²ç»ä½¿ç”¨äº†5000æ¡(small)ï¼Œ200000æ¡(big)æ’å…¥è¯­å¥ä¸€æ¬¡è¿›è¡Œä¸€æ¬¡äº‹åŠ¡æäº¤ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå¯¼è‡´æ¯”I/Oå¤šå¤„ç®¡ç†æ—¶é—´ã€‚
   3. ç´¢å¼•æ›´æ–°ã€‚å°è¡¨çš„æ’å…¥ï¼Œå¤§è¡¨æ’å…¥userè¡¨ï¼Œå®ƒä»¬å’ŒI/Oæ“ä½œéƒ½æ˜¯è¿›è¡Œäº†ä¸€æ¬¡å®Œæ•´çš„å¯¹æ•°æ®csvæ–‡ä»¶çš„è¯»å–ï¼Œè€Œå¯¹äºç´¢å¼•ï¼ˆåœ¨è¿™é‡Œåªæœ‰ä¸»é”®ï¼‰çš„æ›´æ–°æ˜¯ä¸¤è€…æ—¶é—´å·®å¼‚çš„ä¸»è¦æ¥æºä¹‹ä¸€ã€‚è¿›ä¸€æ­¥æŸ¥çœ‹`pg_indexes`ï¼Œpostgresqlä¸»é”®ç´¢å¼•æ˜¯ä½¿ç”¨`btree`ç´¢å¼•ã€‚æˆ‘åœ¨ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹çš„11.3è¯¦ç»†é˜…è¯»äº†æœ‰å…³`btree`ï¼Œä¸€äº›ç¬”è®°è®°å½•åœ¨åæ–‡ä¸­ã€‚
        ![alt text](Project1_report/image-12.png)
   4. çº¦æŸæ£€æŸ¥ï¼ŒDBMSéœ€è¦æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¤–é”®çº¦æŸï¼Œå”¯ä¸€æ€§çº¦æŸç­‰ï¼Œæˆ‘çš„è¡¨ä¸­å¤§éƒ¨åˆ†å­—æ®µå«æœ‰éç©ºçº¦æŸï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´DBMSæ’å…¥æ—¶é—´è¿œè¿œå¤§äºI/Oçš„åŸå› ä¹‹ä¸€ã€‚
   5. å¤–é”®çº¦æŸçš„æ£€æŸ¥ã€‚å¯ä»¥å‘ç°ï¼Œåœ¨å¤§å‹æ•°æ®é›†çš„followsè¡¨è¿›è¡Œæ’å…¥è¯­å¥æ—¶ï¼ŒDBMSæ‰€éœ€è¦çš„æ—¶é—´æ˜¯userçš„è¿‘80å€ï¼ŒI/Oçš„è¿‘160å€ï¼Œè¿™æ˜¯å› ä¸ºfollowsè¡¨çš„ä¸¤ä¸ªå­—æ®µéƒ½æœ‰å¤–é”®çº¦æŸï¼Œå¯¼è‡´äº†å¤§é‡çš„æ£€æŸ¥æ“ä½œã€‚
   6. é”ç®¡ç†ï¼Œæ•°æ®åº“åœ¨æ’å…¥æ“ä½œæ—¶éœ€è¦é”å®šç›¸å…³çš„è¡¨æˆ–è¡Œï¼Œä»¥é˜²æ­¢å¹¶å‘æ“ä½œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´æˆ–å†²çªã€‚
   ***é™¤äº†ä¸Šè¿°åŸå› ï¼Œç»è¿‡æŸ¥é˜…æ•™æå’Œgoogleï¼Œè¿˜æœ‰ä¸€äº›æ“ä½œæ˜¯DBMSåœ¨å­˜å‚¨æ•°æ®æ—¶éœ€è¦è¿›è¡Œï¼Œå¹¶å¯èƒ½å¯¼è‡´æ›´å¤šæ—¶é—´æ¶ˆè€—çš„ï¼Œæ¯”å¦‚ï¼š***

   7. triggerçš„æ‰§è¡Œ
   8. åˆ†åŒºå’Œåˆ†å¸ƒå¼å­˜å‚¨ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸Šå¹¶ä¸å­˜åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½†å¯¹äºåˆ†å¸ƒå¼å­˜å‚¨(DM-MIMD/SIMD)çš„è¶…ç®—æˆ–è€…æœåŠ¡å™¨æ¥è¯´ï¼Œæ•°æ®åº“å¯ä»¥å†³å®šå°†æ•°æ®å­˜å‚¨åˆ°ç‰¹å®šçš„åˆ†åŒºæˆ–è€…èŠ‚ç‚¹ã€‚è€Œå„ç§ç½‘ç»œåè®®ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä»¥åŠIBäº¤æ¢æœºçš„é…ç½®ç­‰éƒ½ä¼šå½±å“æ•°æ®åº“çš„å­˜å‚¨æ—¶é—´ã€‚ä½¿ç”¨å•ä¸ªæ–‡ä»¶I/Oçš„æ–¹å¼ï¼Œæ˜¾ç„¶ä¸éœ€è¦è€ƒè™‘è¿™äº›é—®é¢˜ï¼Œä½†ä¹Ÿä¼šå—é™äºå•ä¸€ç¡¬ä»¶è®¾å¤‡çš„è¯»å†™é€Ÿåº¦ã€‚æ‰€ä»¥åˆ†å¸ƒå¼å­˜å‚¨ä¹Ÿèƒ½å¤Ÿåœ¨å…¶ä»–æ€§èƒ½ä¸Šä¸ºDBå¸¦æ¥æ˜¾è‘—çš„æå‡ã€‚$_{(TODO:è¶…ç®—æ¯”èµ›ä¸­å¯¹äºè¿™ä¸€å—æœ‰å¾ˆå¤šå€¼å¾—æ¢ç´¢çš„åœ°æ–¹ï¼Œå¯ä»¥å†™åœ¨åé¢æˆ–è€…blogé‡Œã€‚)}$
   9. 

## å‚è€ƒèµ„æ–™

[^1]: ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µï¼ˆåŸä¹¦ç¬¬å…­ç‰ˆï¼‰ã€‹ï¼ŒAbraham Silberschatz; Henry F. Korth; S. Sudarshanï¼Œæ¨å†¬é’,æçº¢ç‡•,å”ä¸–æ¸­ç­‰è¯‘ï¼Œ2-3é¡µã€‚

[^2]: Blues ğŸ‹ğŸ‹. ã€Bç«™æ¯å‘¨å¿…çœ‹ã€‘æˆªè‡³æœ€æ–°237æœŸæ•°æ®. 2023. [https://www.heywhale.com/mw/dataset/6523c441b0f4556a312692c1](https://www.heywhale.com/mw/dataset/6523c441b0f4556a312692c1).

[^3]: LXRee. bç«™userå’Œuseråˆ¶ä½œçš„çŸ­è§†é¢‘æ•°æ®. 2022. [https://www.heywhale.com/mw/dataset/6347b53efcd8fca1f7dfba16](https://www.heywhale.com/mw/dataset/6347b53efcd8fca1f7dfba16).

[^4]: Apache Commons CSV. [https://commons.apache.org/proper/commons-csv/user-guide.html](https://commons.apache.org/proper/commons-csv/user-guide.html).
[^5] Google Gson [https://github.com/google/gson](https://github.com/google/gson).
